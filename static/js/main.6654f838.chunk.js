(this.webpackJsonpbanceng=this.webpackJsonpbanceng||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t),n.d(t,"CardSequence",(function(){return r}));const a=n(25).Card;class r{constructor(){this.cards=[],this.length=this.cards.length,this.type="",this.cardTable={}}addCards(e){e.forEach(e=>{this.cardTable[e]||(this.cardTable[e]=1,this.cards.push(new a(e)))}),this.update()}removeCards(e){e.forEach(e=>{this.cards=this.cards.filter(t=>t.displayName!==e),delete this.cardTable[e]}),this.update()}update(){this.length=this.cards.length,this.cards.sort((e,t)=>e.value>t.value?1:-1),this.type=(e=>{const t=e.map(e=>e.number),n=e.map(e=>e.face),a=e.map(e=>e.numberValue);a.sort((e,t)=>e>t?1:-1);let r=0;for(let o=0;o<a.length-1;o++)a[o]-a[o+1]===-1&&r++;const c={},s={};switch(t.forEach(e=>{c[e]=(c[e]||0)+1}),n.forEach(e=>{s[e]=(s[e]||0)+1}),e.length){case 1:return"satuan";case 2:return 1===Object.keys(c).length?"pair":"";case 3:return 1===Object.keys(c).length?"tris":"";case 5:if(1===Object.keys(s).length){if(4===r){let e=0;return t.forEach(t=>{["10","A","J","K","Q"].includes(t)&&e++}),5===e?"royalflush":"straightflush"}return"flush"}return 2===Object.keys(c).length?4===c[Object.keys(c)[0]]||4===c[Object.keys(c)[1]]?"bomb":"fullhouse":4===r?"straight":"";default:return Object.keys(c).includes("2")&&4===c[2]?"kabeh2":12===r?"dragon":""}})(this.cards)}}},25:function(e,t,n){"use strict";n.r(t),n.d(t,"numberValues",(function(){return c})),n.d(t,"facesRange",(function(){return o})),n.d(t,"paket",(function(){return i})),n.d(t,"baseDeck",(function(){return l})),n.d(t,"Card",(function(){return u}));var a=n(1);const r=["3","4","5","6","7","8","9","10","J","Q","K","A","2"],c={};r.forEach((e,t)=>{c[e]=t});const s={Diamond:"\u2666",Club:"\u2663\ufe0f",Heart:"\u2665",Spade:"\u2660\ufe0f"},o={Diamond:0,Club:1,Heart:2,Spade:3},i={pair:0,tris:1,straight:2,flush:3,fullhouse:4,bomb:5,straightflush:6,royalflush:7},l={};let d=0;r.forEach(e=>{Object.keys(s).forEach(t=>{l["".concat(e," ").concat(t)]=d,d++})});class u{constructor(e){const t=e.split(" ");this.value=l[e];var n=Object(a.a)(t,2);this.number=n[0],this.face=n[1],this.numberValue=c[this.number],this.suitEmoji=s[this.face],this.color="Heart"===this.face||"Diamond"===this.face?"red":"black",this.displayName=e}}},55:function(e,t,n){e.exports=n.p+"static/media/cardback.6ca01611.jpg"},58:function(e,t,n){e.exports=n(98)},63:function(e,t,n){},95:function(e,t){},98:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),o=(n(63),n(1)),i=n(4),l=n(14),d=n(5),u=n(3),h=n.n(u),m=n(17),b=n(7),f=n(56);function p(){const e=Object(i.a)(["\n  display: flex;\n  width: 50%;\n  height: 50%;\n  flex-direction: column;\n  .field_container {\n    position: relative;\n    padding: 15px 0 0;\n    margin-top: 10px;\n    width: 100%;\n  };\n  .title_registration {\n    margin-top: 1em;\n    font-size: ","em;\n  }\n  .name {\n    color: white;\n    font-family: inherit;\n    width: 100%;\n    border: 0;\n    border-bottom: 2px solid white;\n    outline: 0;\n    font-size: ","em;\n    padding: 7px 0;\n    background: transparent;\n    transition: border-color 0.2s;\n    &::placeholder {\n      color: transparent;\n    };\n  \n    &:placeholder-shown ~ .label {\n      font-size: ","rem;\n      cursor: text;\n      top: 20px;\n    };\n  };\n  .label {\n    position: absolute;\n    top: 0;\n    display: block;\n    transition: 0.2s;\n    font-size: ","rem;\n  };\n  .name:focus {\n    ~ .label {\n      position: absolute;\n      top: -","%;\n      display: block;\n      transition: 0.2s;\n      font-size: ","rem;\n      color: red;\n      font-weight:700;    \n    };\n    padding-bottom: 6px;\n    font-weight: 700;\n    border-width: 5px;\n    border-image: linear-gradient(to right, red, blue);\n    border-image-slice: 1;\n  };\n  .info {\n    width: 100%;\n  }\n };\n"]);return p=function(){return e},e}const g=d.a.div(p(),e=>5*e.width,e=>3*e.width,e=>4*e.width,e=>2*e.width,e=>35*e.width,e=>3*e.width);var w=({data:e,show:t=0,width:n,bufferHandler:a,bufferValue:c,submitHandler:s})=>e.map((e,o)=>r.a.createElement(f.a,{in:o===t,unmountOnExit:!0,key:e.name},r.a.createElement(g,{className:"centered",width:n},r.a.createElement("div",{className:"field_container"},r.a.createElement("input",{id:e.name,className:"name",type:e.type,minLength:e.min,maxLength:e.max,value:c,autoFocus:0!==t,placeholder:"Jangan",onChange:e=>a(e.target.value),onKeyUp:t=>13===t.keyCode?s(e.name):null}),r.a.createElement("label",{htmlFor:e.name,className:"label"},e.name)),r.a.createElement("div",{className:"info"},e.litleInfo)))),y=n(52),j=n.n(y),O=n(13);const k=Object(a.createContext)(null);var x=({children:e})=>{const t=Object(a.useState)(1),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],h=Object(a.useState)(new O.CardSequence),m=Object(o.a)(h,2),b=m[0],f=m[1],p=Object(a.useState)(new O.CardSequence),g=Object(o.a)(p,2),w=g[0],y=g[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),E=v[0],S=v[1],C=Object(a.useState)({}),I=Object(o.a)(C,2),N=I[0],T=I[1],W=Object(a.useState)(!0),A=Object(o.a)(W,2),H=A[0],P=A[1],z=Object(a.useState)(!1),D=Object(o.a)(z,2),J=D[0],R=D[1],G=Object(a.useState)({}),U=Object(o.a)(G,2),L=U[0],_=U[1],K=Object(a.useState)(""),B=Object(o.a)(K,2),M=B[0],V=B[1],q=Object(a.useState)("Banceng Mowal?"),F=Object(o.a)(q,2),Q=F[0],Y=F[1],X={globalWidth:[c,s],isPlaying:[d,u],isPlayable:{isPlayableState:E,setIsPlayable:S},playingCard:{playingCardState:b,setPlayingCard:e=>{const t=new O.CardSequence;t.addCards(e),f(t)}},selectedCard:{selectedCardState:w,selectedCardReducer:(e,t)=>{const n=w;switch(e){case"add":n.addCards(t),y(n);break;case"remove":n.removeCards(t),y(n);break;case"reset":y(new O.CardSequence)}R(!1)}},room:{roomState:N,setRoom:T},userInfo:{userInfoState:L,setUserInfo:e=>{if(e){const t=j()(e).userId;t&&_({userId:t,token:e})}else _({});P(!1)}},wait:{waitState:J,setWait:R},globalWait:{globalWaitState:H,setGlobalWait:P},globalError:{getGlobalError:()=>{const e=""+M;return V(""),e},setGlobalError:V},title:{globalTitle:Q,setGlobalTitle:e=>{Y(e||"Banceng Mowal?")}}};return r.a.createElement(k.Provider,{value:X},e)};const v=e=>{const t="qwertyuiop[]\\asdfghjkl;'zxcvbnm,./`1234567890-=QWERTYUIOP{}|ASDFGHJKL:ZXCVBNM<>?~!@#$%^&*()_+";let n="",a=0,r=0;for(let c=0;c<e.length;c++)r+=e[c].charCodeAt();for(let c=0;c<20;c++){a+=e[c%e.length].charCodeAt()+r,a*=107,n+=t[a%t.length]}return n},E="http://localhost:8080/",S=function(){var e=Object(b.a)(h.a.mark((function e({userId:t,password:n,type:a}){var r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(n),e.prev=1,c={"Content-Type":"application/json"},e.next=5,fetch(E+"auth/"+a,{method:"POST",headers:c,body:JSON.stringify({userId:t,password:r})});case 5:return s=e.sent,e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(h.a.mark((function e({token:t}){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={"Content-Type":"application/json",Authorization:"Bearer "+t},e.next=4,fetch(E+"room",{method:"POST",headers:n});case 4:return a=e.sent,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(h.a.mark((function e({token:t,roomId:n}){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={"Content-Type":"application/json",Authorization:"Bearer "+t},e.next=4,fetch(E+"room/"+n,{method:"GET",headers:a});case 4:return r=e.sent,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function N(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  color: white;\n  .container {\n    display: flex;\n    width: 50%;\n    height: 50%;\n    flex-direction: column;\n  }\n  .field_container {\n    position: relative;\n    padding: 15px 0 0;\n    margin-top: 10px;\n    width: 100%;\n  };\n  .title_registration {\n    margin-top: 1em;\n    font-size: ","em;\n  };\n"]);return N=function(){return e},e}const T=d.a.div(N(),e=>5*e.width);var W=()=>{const e=Object(a.useContext)(k),t=Object(o.a)(e.globalWidth,1)[0],n=e.userInfo.setUserInfo,c=Object(a.useState)({}),s=Object(o.a)(c,2),i=s[0],d=s[1],u=Object(a.useState)(""),f=Object(o.a)(u,2),p=f[0],g=f[1],y=Object(a.useState)(0),j=Object(o.a)(y,2),O=j[0],x=j[1],v=Object(a.useState)(!1),E=Object(o.a)(v,2),C=E[0],I=E[1],N=Object(a.useState)(""),W=Object(o.a)(N,2),A=W[0],H=W[1],P=Object(a.useState)("Daftar"),z=Object(o.a)(P,2),D=z[0],J=z[1],R=Object(l.g)(),G=function(){var e=Object(b.a)(h.a.mark((function e(t){var a,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=55;break}if(!(O<2)){e.next=11;break}0===O&&p.includes(" ")&&(I(!0),H("JANGAN ADA SPASI!")),(a=Object(m.a)({},i))[t.toLowerCase()]=p,d(a),x(O+1),g(""),J("Daftar"),e.next=53;break;case 11:if(C){e.next=49;break}if(i.password!==p||C){e.next=44;break}return e.next=15,S({userId:i.userid,password:i.password,type:"signup"});case 15:if(406!==(r=e.sent).status){e.next=22;break}J("Udah ada yang punya."),x(0),g(i.userid),e.next=42;break;case 22:if(500!==r.status){e.next=28;break}J("Ada error coba lagi."),x(0),g(i.userid),e.next=42;break;case 28:return e.prev=28,e.next=31,r.json();case 31:c=e.sent,s=c.token,n(s),R.push("/room/"),e.next=42;break;case 37:e.prev=37,e.t0=e.catch(28),J("Ada error coba lagi."),x(0),g(i.userid);case 42:e.next=47;break;case 44:J("Password tidak sama."),x(0),g(i.userid);case 47:e.next=53;break;case 49:I(!1),J(A),x(0),g(i.userid);case 53:e.next=56;break;case 55:J("".concat(t,"nya mana?"));case 56:case"end":return e.stop()}}),e,null,[[28,37]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T,{width:t},r.a.createElement("h1",{className:"title_registration"},D),r.a.createElement(w,{width:t,show:O,bufferHandler:g,bufferValue:p,submitHandler:G,data:[{name:"UserID",type:"text",min:5,max:10,litleInfo:"Jangan ada spasi."},{name:"Password",type:"password",min:0,max:20,litleInfo:"Jangan aneh-aneh. Kalau lupa gak bisa direset."},{name:"Confirm Password",type:"password",min:0,max:20,litleInfo:"Ulangin lagi."}]}))};function A(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  color: white;\n  .container {\n    display: flex;\n    width: 50%;\n    height: 50%;\n    flex-direction: column;\n  };\n  .field_container {\n    position: relative;\n    padding: 15px 0 0;\n    margin-top: 10px;\n    width: 100%;\n  };\n  .title_registration {\n    margin-top: 1em;\n    font-size: ","em;\n  };\n"]);return A=function(){return e},e}const H=d.a.div(A(),e=>5*e.width);var P=()=>{const e=Object(a.useContext)(k),t=Object(o.a)(e.globalWidth,1)[0],n=e.userInfo.setUserInfo,c=Object(a.useState)({}),s=Object(o.a)(c,2),i=s[0],d=s[1],u=Object(a.useState)(""),f=Object(o.a)(u,2),p=f[0],g=f[1],y=Object(a.useState)(0),j=Object(o.a)(y,2),O=j[0],x=j[1],v=Object(a.useState)("Masukin Dulu"),E=Object(o.a)(v,2),C=E[0],I=E[1],N=Object(l.g)(),T=Object(l.h)().state.pathname,W=function(){var e=Object(b.a)(h.a.mark((function e(t){var a,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=41;break}if(!(O<1)){e.next=10;break}(a=Object(m.a)({},i))[t.toLowerCase()]=p,d(a),x(O+1),g(""),I("Masukin Dulu"),e.next=39;break;case 10:return e.next=12,S({userId:i.userid,password:p,type:"login"});case 12:if(403!==(r=e.sent).status){e.next=19;break}I("Password atau email salah."),x(0),g(i.userid),e.next=39;break;case 19:if(500!==r.status){e.next=25;break}I("Ada error coba lagi."),x(0),g(i.userid),e.next=39;break;case 25:return e.prev=25,e.next=28,r.json();case 28:c=e.sent,s=c.token,n(s),N.push(T||"/room"),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(25),I("Ada error coba lagi."),x(0),g(i.userid);case 39:e.next=42;break;case 41:I("".concat(t,"nya mana?"));case 42:case"end":return e.stop()}}),e,null,[[25,34]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(H,{width:t},r.a.createElement("h1",{className:"title_registration"},C),r.a.createElement(w,{width:t,show:O,bufferHandler:g,bufferValue:p,submitHandler:W,data:[{name:"UserID",type:"text",min:5,max:10,litleInfo:""},{name:"Password",type:"password",min:0,max:20,litleInfo:""}]}),r.a.createElement("div",{className:"hoverable",onClick:()=>N.push("signup")},"Daftar"))},z=n(54),D=n.n(z);const J=n(25).baseDeck;class R{constructor(){this.cards=Object.keys(J).map(e=>e),this.length=52}kocok(){let e,t,n=this.cards.length;for(;0!==n;)t=Math.floor(Math.random()*n),n-=1,e=this.cards[n],this.cards[n]=this.cards[t],this.cards[t]=e;return this.cards[this.length-1]}bagi(){return this.length--,this.cards.pop()}}const G=n(13).CardSequence;class U{constructor(e){this.name=e,this.cards=new G,this.score=0}addCards(e){this.cards.addCards(e)}removeCard(e){this.cards.removeCards(e)}getCards(){return this.cards.cards}}const L=n(25),_=L.paket,K=L.facesRange,B=L.numberValues,M=(e,t)=>{if(0===e.length)return!(1!==t.length&&!Object.keys(_).includes(t.type));if(e.length!==t.length)return"";switch(e.length){case 1:return e.type===t.type&&t.cards[0].value>e.cards[0].value;case 2:case 3:return e.type===t.type&&t.cards[1].value>e.cards[1].value;case 5:if(e.type!==t.type)return _[t.type]>_[e.type];{const n=e.cards.map(e=>e.number),a=t.cards.map(e=>e.number),r={},c={};let s="",o="";switch(["fullhouse","bomb"].includes(e.type)&&(n.forEach(e=>{r[e]=(r[e]||0)+1}),a.forEach(e=>{c[e]=(c[e]||0)+1}),s=r[Object.keys(r)[0]]<r[Object.keys(r)[1]]?Object.keys(r)[1]:Object.keys(r)[0],o=c[Object.keys(c)[0]]<c[Object.keys(c)[1]]?Object.keys(c)[1]:Object.keys(c)[0]),e.type){case"straight":return n.includes("2")&&a.includes("2")?t.cards[3].value>e.cards[3].value:n.includes("2")||a.includes("2")?n.includes("2"):t.cards[4].value>e.cards[4].value;case"flush":if(e.cards[0].face===t.cards[0].face){const e=n.includes("2")?n[3]:n[4];return(a.includes("2")?a[3]:a[4])>e}return K[t.cards[0].face]>K[e.cards[0].face];case"fullhouse":return"2"===s||"2"===o?"2"===s:B[o]>B[s];case"bomb":return B[o]>B[s];case"straighflush":return e.cards[0].face===t.cards[0].face?n.includes("2")||a.includes("2")?n.includes("2"):B[a[4]]>B[n[4]]:K[t.cards[0].face]>K[e.cards[0].face];default:return""}}default:return""}};var V=n(55),q=n.n(V);function F(){const e=Object(i.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: ","em;\n  height: ","em;\n  background-color: white;\n  color: ",";\n  border-radius: 3px;\n  flex-direction: column;\n  box-shadow: 3px 4px rgba(0, 0, 0, 0.2);\n  margin: 0.2em;\n  border-color: navy;\n  ","\n  &:hover{\n    cursor: ",";\n  };\n  .cardNumber{\n    font-family: Pokerface;\n    font-size: ","em;\n    margin: 10% auto 20% auto;\n    align-Self: flex-start;\n  };\n  .cardFace{\n    font-size: ","em;\n    width: 100%;\n    color: ",";\n  };\n  img{\n    height: 100%;\n    width: 100%;\n  };\n"]);return F=function(){return e},e}const Q=d.a.div(F(),e=>e.width,e=>1.4*e.width,e=>e.color,e=>e.isSelected?"border-style: solid;":"",e=>e.isClickable?"pointer":"default",e=>.3*e.width,e=>.4*e.width,e=>e.color);var Y=({width:e,isClickable:t,isShown:n,cardObj:c,clickHandler:s})=>{const i=Object(a.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],h=()=>{s&&s(d,c.displayName),u(!d)};return n?r.a.createElement(Q,{color:c.color,width:e,isSelected:d,isClickable:t,onClick:t?h:null},r.a.createElement("h1",{className:"centered cardNumber"},c.number),r.a.createElement("div",{className:"centered cardFace"},r.a.createElement("span",{role:"img","aria-label":""},c.suitEmoji))):r.a.createElement(Q,{width:e},r.a.createElement("img",{alt:"Card",src:q.a}))};function X(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-top: 1em;\n  height: 33%;\n  .column{\n    width: ","%;\n    flex-direction: column;\n  };\n  .name{\n    font-size: ","em;\n    margin-top: 0.2em;\n    color: white;\n  };\n  .isTurning{\n    text-shadow: -1px 0 yellow, 0 1px yellow, 1px 0 black, 0 -1px yellow;\n    color: navy;\n  };\n  .name[data-left]:after {\n    content: attr(data-left);\n    position: absolute;\n    font-size: .7em;\n    background: red;\n    color: white;\n    width: 1.4em;\n    height: 1.4em;\n    text-align: center;\n    border-radius:50%;\n    box-shadow:0 0 1px #333;\n };\n"]);return X=function(){return e},e}const Z=d.a.div(X(),e=>100/e.player,e=>2*e.width);var $=({data:e=[]})=>{const t=Object(a.useContext)(k).globalWidth,n=e.length,c=e.map(e=>r.a.createElement("div",{key:e.userId,className:"centered column"},r.a.createElement(Y,{width:7*t[0]}),r.a.createElement("div",{className:"name ".concat(e.isTurning?"isTurning":null),"data-left":e.cards},e.userId)));return r.a.createElement(Z,{player:n,width:t[0]},c)};function ee(){const e=Object(i.a)(["\n  .btn {\n    background-color: ",";\n    color: white;\n    font-size: ","em;\n    width: 3em;\n    height: 3em;\n    border-radius: 10em;\n  };\n  .btn:hover{\n    cursor: ",";\n  };\n"]);return ee=function(){return e},e}const te=d.a.div(ee(),e=>e.color,e=>3*e.width,e=>e.activate?"pointer":"default");var ne=({color:e,clickHandler:t,text:n,active:c})=>{const s=Object(a.useContext)(k).globalWidth;return r.a.createElement(te,{activate:c,width:s[0],className:"centered",onClick:c?t:null,color:e},r.a.createElement("div",{className:"centered btn"},n))};var ae=({kocokHandler:e,lawanHandler:t,cussHandler:n,isTurn:c,opponentTotal:s})=>{const i=Object(a.useContext)(k),l=i.globalWidth,d=Object(o.a)(i.isPlaying,1)[0],u=i.playingCard.playingCardState,h=i.selectedCard,m=h.selectedCardState,b=h.selectedCardReducer,f=i.isPlayable.isPlayableState,p=u.cards.map(e=>r.a.createElement(Y,{key:e.displayName,isShown:!0,width:5*l[0],cardObj:e}));return r.a.createElement("div",{style:{height:"33%"},className:"centered"},r.a.createElement("div",{style:{width:"25%"},className:"centered"},d?r.a.createElement(ne,{active:c&&u.length>0,text:"Cuss",clickHandler:n,color:c&&u.length>0?"#19b5fe":"#013243"}):null),r.a.createElement("div",{style:{width:"50%"},className:"centered"},p),r.a.createElement("div",{style:{width:"25%"},className:"centered"},d?r.a.createElement(ne,{active:f&&c&&m.length>0,text:"Lawan",clickHandler:()=>{t(m),b("reset")},color:f&&c&&m.length>0?"#f03434":"#96281b"}):r.a.createElement(ne,{active:s>0,text:"Kocok",clickHandler:e,color:s>0?"#f03434":"#96281b"})))};var re=({cards:e=[]})=>{const t=Object(a.useContext)(k),n=t.globalWidth,c=t.playingCard.playingCardState,s=t.selectedCard,o=s.selectedCardState,i=s.selectedCardReducer,l=t.isPlayable.setIsPlayable,d=t.room.roomState,u=t.wait.setWait,h=(e,t)=>{let n=!0;e?(i("remove",[t]),0===d.game&&0===d.round&&(n=Boolean(o.cardTable["3 Diamond"])),l(M(c,o)&&n)):(i("add",[t]),0===d.game&&0===d.round&&(n=Boolean(o.cardTable["3 Diamond"])),l(M(c,o)&&n)),u(!0)},m=e.map((e,t)=>r.a.createElement(Y,{key:e.displayName,isShown:!0,isClickable:!0,width:4*n[0],clickHandler:h,cardObj:e}));return r.a.createElement("div",{style:{height:"33%"},className:"centered"},m)};function ce(){const e=Object(i.a)(["\n  background-color: rgba(255,0,0);\n  position: absolute;\n  z-index: 100;\n  padding: 0.5em;\n  color: white;\n  font-size: ","em;\n  border-radius: 5px;\n  display: flex;\n  width: 15vw;\n  height: ",";\n  flex-direction: column;\n  .userScore {\n    margin-bottom: 0.7em;\n  };\n"]);return ce=function(){return e},e}const se=d.a.div(ce(),e=>1.7*e.width,e=>e.width<1?e.isShown?"42vh":"12vh":e.isShown?"35vh":"6vh");var oe=({players:e=[],game:t=0,isShown:n=!1,clickHandler:c})=>{const s=Object(a.useContext)(k).globalWidth,o=e.map(e=>r.a.createElement("div",{key:e.userId,className:"userScore"},"".concat(e.userId,": ").concat(e.score)));return r.a.createElement(se,{className:"hoverable",width:s[0],isShown:n,onClick:c},r.a.createElement("h3",{className:"centered"},"CATETAN"),n?o:null,n?"Game ke-".concat(t):null)};const ie={display:"flex",flexDirection:"column",width:"100%",height:"100%"};let le;var de=()=>{const e=Object(a.useContext)(k),t=Object(o.a)(e.globalWidth,2),n=t[0],c=t[1],s=Object(o.a)(e.isPlaying,2),i=s[0],d=s[1],u=e.room,h=u.roomState,b=u.setRoom,f=e.selectedCard.selectedCardReducer,p=e.title.setGlobalTitle,g=Object(a.useState)([]),w=Object(o.a)(g,2),y=w[0],j=w[1],x=Object(a.useState)([]),v=Object(o.a)(x,2),E=v[0],S=v[1],C=Object(a.useState)(!1),I=Object(o.a)(C,2),N=I[0],T=I[1],W=e.playingCard,A=W.playingCardState,H=W.setPlayingCard,P=Object(l.i)().roomId,z=Object(l.g)(),J=e.userInfo.userInfoState,G=e.globalError.setGlobalError,L=J.userId,_=J.token;Object(a.useEffect)(()=>{window.innerWidth<900*n&&c(window.innerWidth/1700)},[window.innerWidth]),Object(a.useEffect)(()=>(le=D()("http://bancengserver.jimmyganteng.com"),le.emit("room",JSON.stringify({token:_,type:"ENTER ROOM",payload:{roomId:P,userId:L}}),({error:e})=>{if(e)switch(e){case"You're already in the room":G("Udah di dalem, ngapain masuk lagi?"),z.push("/");break;case"Room is on a game":G("Kalem se-game dulu."),z.push("/");break;case"Room is full":G("Lapak penuh."),z.push("/");break;default:z.push("/")}}),()=>{p(),le.disconnect()}),[]),Object(a.useEffect)(()=>{le.on("update",e=>{const t=JSON.parse(e).room,n=t.gameState,a=t.isPlaying,r=t.title,c=t.order,s=n.players,o=n.playingCards,i=n.currentTurn,l=n.game,u=n.round,g=s.filter(e=>e.userId!==L),w=s.filter(e=>e.userId===L)[0];p(r),f("reset"),S(c[L].map(e=>{const t=g.filter(t=>t.userId===e)[0];return{userId:t.userId,name:t.name,cards:t.cards.length,isTurning:i===t.userId}})),H(o),(e=>{const t=new O.CardSequence;t.addCards(e),j(t.cards)})(w.cards),d(a),b(Object(m.a)({},h,{players:s,game:l,isTurn:i===L,round:u}))}),le.on("disconnect",e=>{"io server disconnect"===e&&le.connect()})},[]);return r.a.createElement("div",{style:ie},r.a.createElement(oe,{isShown:N,clickHandler:()=>T(!N),players:h.players,game:h.game}),r.a.createElement($,{data:E}),i?null:r.a.createElement("div",{className:"centered",style:{flexDirection:"column",color:"white"}},r.a.createElement("div",null,"Link: ","".concat("http://banceng.jimmyganteng.com","/room/").concat(P)),r.a.createElement("div",null,"Room ID: ",P)),r.a.createElement(ae,{kocokHandler:()=>{if(!i&&0===A.length&&E.length>0){const e=new R;e.kocok();const t=[...E,{userId:L}].map(e=>new U(e.userId));((e,t,n="A")=>{n=B[n]-1;let a=n%=e.length;for(;t.length>0;)e[a].addCards([t.bagi()]),a++,a===e.length&&(a=0)})(t,e);const n={};t.forEach(e=>{const t={};e.getCards().forEach(e=>{t[e.displayName]=1}),n[e.name]=t}),le.emit("room",JSON.stringify({token:_,type:"START GAME",payload:{cards:n,roomId:P,userId:L}}),({error:e})=>{})}},lawanHandler:e=>{if(e.length===y.length)le.emit("room",JSON.stringify({token:_,type:"NUTUP",payload:{roomId:P,userId:L}}),({error:e})=>{});else{const t=e.cards.map(e=>e.displayName);le.emit("room",JSON.stringify({token:_,type:"LAWAN",payload:{cards:t,roomId:P,userId:L}}),({error:e})=>{})}},cussHandler:()=>{le.emit("room",JSON.stringify({token:_,type:"CUSS",payload:{roomId:P,userId:L}}),({error:e})=>{})},isTurn:h.isTurn,opponentTotal:E.length}),r.a.createElement(re,{cards:y}))};function ue(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  color: white;\n  .container {\n    display: flex;\n    width: 50%;\n    height: 50%;\n    flex-direction: column;\n  };\n  .field_container {\n    position: relative;\n    padding: 15px 0 0;\n    margin-top: 10px;\n    width: 100%;\n  };\n  .title_registration {\n    margin-top: 1em;\n    font-size: ","em;\n  };\n"]);return ue=function(){return e},e}const he=d.a.div(ue(),e=>5*e.width);var me=()=>{const e=Object(l.g)(),t=Object(a.useContext)(k),n=Object(o.a)(t.globalWidth,1)[0],c=t.userInfo.userInfoState,s=t.globalError.getGlobalError,i=t.userInfo.setUserInfo,d=c.token,u=Object(a.useState)(""),m=Object(o.a)(u,2),f=m[0],p=m[1],g=Object(a.useState)("Masuk Lapak"),y=Object(o.a)(g,2),j=y[0],O=y[1];Object(a.useEffect)(()=>{const e=s();e.length>0&&O(e)},[]);const x=function(){var t=Object(b.a)(h.a.mark((function t(){var n,a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=4;break}10===f.length?e.push("/room/".concat(f)):O("Ngawur, gak ada lapaknya!"),t.next=22;break;case 4:return t.next=6,C({token:d});case 6:if(500!==(n=t.sent).status){t.next=11;break}O("Ada error coba lagi."),t.next=22;break;case 11:return t.prev=11,t.next=14,n.json();case 14:a=t.sent,r=a.roomId,e.push("/room/".concat(r)),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(11),O("Ada error coba lagi.");case 22:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(he,{width:n},r.a.createElement("h1",{className:"title_registration"},j),r.a.createElement(w,{width:n,bufferHandler:p,bufferValue:f,submitHandler:x,data:[{name:"RoomID",type:"text",min:0,max:10,litleInfo:"Kalau mau buka lapak baru, kosongin aja."}]}),r.a.createElement("div",{className:"hoverable",onClick:()=>{localStorage.clear(),i(),e.push("/")}},"Logout"))};const be=e=>{let t=Object.assign({},e);const n=Object(a.useContext)(k),c=n.userInfo.userInfoState,s=n.globalWait.globalWaitState,i=Object(a.useState)(!1),d=Object(o.a)(i,2),u=d[0],h=d[1],m=Object(a.useState)(!1),b=Object(o.a)(m,2),f=b[0],p=b[1],g=Object(l.h)().pathname;return Object(a.useEffect)(()=>{s||(c.token&&p(!0),h(!0))},[s]),u?f?r.a.createElement(l.b,t):r.a.createElement(l.a,{to:{pathname:"/login",state:{pathname:g}}}):null},fe=e=>{let t=Object.assign({},e);let n=!1;if(Object(a.useContext)(k).userInfo.userInfoState.token)n=!0;else{const e=localStorage.getItem("rahasiaKita");if(e){const t=JSON.parse(e).token;n=Boolean(t)}}return n?r.a.createElement(l.a,{to:"/room"}):r.a.createElement(l.b,t)},pe=e=>{let t=Object.assign({},e);const n=Object(a.useContext)(k),c=n.userInfo.userInfoState,s=n.globalError.setGlobalError,i=c.token,d=Object(l.i)().roomId,u=Object(a.useState)(!1),m=Object(o.a)(u,2),f=m[0],p=m[1],g=Object(a.useState)(!1),w=Object(o.a)(g,2),y=w[0],j=w[1];return Object(a.useEffect)(()=>{(function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({token:i,roomId:d});case 2:500===(t=e.sent).status?(s("Ada error coba lagi."),j(!0)):429===t.status?(s("Lapak penuh"),j(!0)):404===t.status&&(s("Ngawur, gak ada lapaknya!"),j(!0)),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()},[]),f?y?r.a.createElement(l.a,{to:"/room"}):r.a.createElement(l.b,t):null};function ge(){const e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  .content {\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    padding: 0.5em;\n  };\n  .title {\n    height: 20vh;\n    width: 100%;\n    font-family: customFont;\n    font-size: ","em;\n    color: white;\n    text-shadow: 0.1em 0.1em 0px #000000;\n  };\n  .page {\n    display: flex;\n    height: 70vh;\n    width: 100%;\n  }\n  .footer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    color: white;\n    width: 100%;\n    height: 5vh;\n  };\n"]);return ge=function(){return e},e}const we=d.a.div(ge(),e=>e.width*(e.titleLength>20?7:10));var ye=()=>{const e=Object(a.useContext)(k),t=Object(o.a)(e.globalWidth,2),n=t[0],c=t[1],s=e.userInfo,i=s.userInfoState,d=s.setUserInfo,u=e.globalWait.setGlobalWait,h=e.title.globalTitle,m=Object(l.g)();return Object(a.useEffect)(()=>{window.innerWidth<900*n&&c(window.innerWidth/1700)},[window.innerWidth]),Object(a.useEffect)(()=>{const e=localStorage.getItem("rahasiaKita");if(e){const t=JSON.parse(e).token;i.token&&i.token===t||d(t)}else if(i.token){const e=JSON.stringify({userId:i.userId,token:i.token});localStorage.setItem("rahasiaKita",e)}else u(!1)},[i]),r.a.createElement(we,{width:n,titleLength:h.length},r.a.createElement("div",{className:"content"},r.a.createElement("div",null,r.a.createElement("div",{onClick:()=>m.push("/"),className:"title centered hoverable"},h)),r.a.createElement("div",{className:"page centered"},r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0},r.a.createElement(l.a,{to:"/room"})),r.a.createElement(fe,{path:"/signup",component:W,exact:!0}),r.a.createElement(fe,{path:"/login",component:P,exact:!0}),r.a.createElement(be,{path:"/room/",component:me,exact:!0}),r.a.createElement(be,{path:"/room/:roomId"},r.a.createElement(pe,null,r.a.createElement(de,null))))),r.a.createElement("div",{className:"footer centered"},r.a.createElement("div",null,"Copyright \xa9 2020 Jimmy 'Bang Koboi'"),r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/Fazatholomew/banceng"},"Github")))))},je=n(12);s.a.render(r.a.createElement(x,null,r.a.createElement(je.a,null,r.a.createElement(ye,null))),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.6654f838.chunk.js.map